#!/bin/bash
# RoyalBot Pre-commit Hook
#
# åœ¨æ¯æ¬¡ git commit å‰è‡ªåŠ¨è¿è¡Œä»£ç æ£€æŸ¥
#
# å®‰è£…æ–¹å¼ï¼šcp .githooks/pre-commit .git/hooks/pre-commit && chmod +x .git/hooks/pre-commit

set -e

echo "ğŸ” Running code checks..."

# è¿è¡Œä»£ç æ£€æŸ¥è„šæœ¬
if [ -f "scripts/check_code.py" ]; then
    python3 scripts/check_code.py
    CHECK_RESULT=$?
    if [ $CHECK_RESULT -ne 0 ]; then
        echo ""
        echo "âŒ ä»£ç æ£€æŸ¥å‘ç°é—®é¢˜ï¼"
        echo "è¯·ä¿®å¤åå†æäº¤ï¼Œæˆ–ä½¿ç”¨ --no-verify è·³è¿‡æ£€æŸ¥"
        exit 1
    fi
else
    echo "âš ï¸  è­¦å‘Š: scripts/check_code.py ä¸å­˜åœ¨ï¼Œè·³è¿‡ä»£ç æ£€æŸ¥"
fi

echo "âœ… ä»£ç æ£€æŸ¥é€šè¿‡"
exit 0
